(function(){var B="",A="",z="",f="",a="",k="",o="",u="",x="",y="",b="",D="",l="",g="",F="https://www.addthis.com/secure/ssi_callback",G="",E="",v="",s="",r="",H="",j="",n=function(L,J){a=document.createElement("span");a.id=L;a.className="ssi-button";var K=document.getElementsByTagName("a");for(var I=0;I<K.length;I++){if(K[I].className==J&&(K[I].children.length==0||K[I].getElementsByTagName("span").length==0)){K[I].appendChild(a);return true;}}return false;},e=function(){if(window.addthis_config.login.services.facebook){var I=null;if(((window.addthis_config.login.services||{}).facebook||{}).appId){I=((window.addthis_config.login.services||{}).facebook||{}).appId;}else{if(((window.addthis_config.login.services||{}).facebook||{}).id){I=((window.addthis_config.login.services||{}).facebook||{}).id;}}if(I){A=n("facebook-connect","addthis_login_facebook");if(A){document.getElementById("facebook-connect").onclick=function(){if(o==true){G=F+"?isNewGen=true";}else{G=F+"?isNewGen=false";}z="https://www.facebook.com/dialog/oauth?";y=["client_id="+I,"redirect_uri="+G,"response_type=token","state="+window.location];if(window.addthis_config.login.services.facebook["scope"]){y.push("scope="+window.addthis_config.login.services.facebook["scope"]);}f=y.join("&");z=z+f;if(o==true){window.open(z,"facebook","width=700, height=500");}else{window.location.href=z;}};if(window.location.hash.indexOf("access_token=")!=-1&&window.location.hash.indexOf("expires_in=")!=-1&&window.location.hash.indexOf("token_type=Bearer")==-1){w(window.location.hash.substring(1));}window._at_auth_callback=function(K){_ate.ed.fire("addthis.social.connect",window,{service:"facebook"});_ate.track.osc({service:"facebook"});if(K.error){addthis.login.user={service:"facebook",error:{code:K.error.code,message:K.error.message}};window.addthis_config.login.callback(addthis.login.user);return;}K.service="facebook";_ate.ed.fire("addthis.social.connect",window,K);_ate.track.osc(K);addthis.login.signature=B.split("&");addthis.login.signature=addthis.login.signature[2].split("=");addthis.login.user={service:"facebook",facebook:{},id:K.id,addthis_signature:addthis.login.signature[1]};for(u in K){addthis.login.user.facebook[u]=K[u];addthis.login.user[u]=K[u];}addthis.login.user.serviceId=K.id;addthis.login.user.thumbnailURL="https://graph.facebook.com/"+K.id+"/picture";if(K.first_name){addthis.login.user.firstName=K.first_name;}else{addthis.login.user.firstName="";}if(K.last_name){addthis.login.user.lastName=K.last_name;}else{addthis.login.user.lastName="";}if(K.gender){addthis.login.user.gender=K.gender;}else{addthis.login.user.gender="";}if(K.birthday){var J=K.birthday.split("/");addthis.login.user.birthDay=J[0];addthis.login.user.birthMonth=J[1];addthis.login.user.birthYear=J[2];}else{addthis.login.user.birthDay="";addthis.login.user.birthMonth="";addthis.login.user.birthYear="";}if(K.email){addthis.login.user.email=K.email;}else{addthis.login.user.email="";}var L;if((K.hometown||{}).name){L=K.hometown.name.split(",");}else{if((K.location||{}).name){L=K.location.name.split(",");}else{L="";}}if(L){addthis.login.user.country=L.pop().replace(/^\s+|\s+$/g,"");}else{addthis.login.user.country="";}addthis.login.user.profileURL=K.link;if(K.education){addthis.login.user.education=(K.education[0])?K.education[0].type+" : "+K.education[0]["school"]["name"]:"";if(K.education[1]){addthis.login.user.education+=", "+K.education[1].type+" : "+K.education[1]["school"]["name"];}}else{addthis.login.user.education="";}if(K.religion){addthis.login.user.religion=K.religion;}else{addthis.login.user.religion="";}if(K.political){addthis.login.user.politicalView=K.political;}else{addthis.login.user.politicalView="";}if(K.relationship_status){addthis.login.user.relationshipStatus=K.relationship_status;}else{addthis.login.user.relationshipStatus="";}if((K.hometown||{}).name){addthis.login.user.hometown=K.hometown.name.split(",")[0];}else{addthis.login.user.hometown="";}if(K.username){addthis.login.user.username=K.username;}else{addthis.login.user.username="";}if(K.timezone){addthis.login.user.timezone=K.timezone;}else{addthis.login.user.timezone="";}if(K.locale){addthis.login.user.locale=K.locale;}else{addthis.login.user.locale="";}m(K,addthis.login.user,"facebook");if(window.addthis_config.login.callback){setTimeout(function(){window.addthis_config.login.callback(addthis.login.user);},250);}};}}}},w=function(I){B=I;x="https://graph.facebook.com/me?";g=[B,"callback=_at_auth_callback"];l=g.join("&");j=x+l;E=document.createElement("script");E.src=j;document.body.appendChild(E);},p=function(){if(window.addthis_config.login.services.twitter){var I=null;if(((window.addthis_config.login.services||{}).twitter||{}).appKey){I=((window.addthis_config.login.services||{}).twitter||{}).appKey;}else{if(((window.addthis_config.login.services||{}).twitter||{}).id){I=((window.addthis_config.login.services||{}).twitter||{}).id;}}if(I){A=n("twitter-connect","addthis_login_twitter");if(A){if(window.location.hash.indexOf("oauth_access_token=")!=-1||window.location.href.indexOf("oauth_access_token=")!=-1){addthis.login.signature=location.href.split("&signature=");C(addthis.login.signature[1]);}document.getElementById("twitter-connect").onclick=function(){var J=window.location.href.split("#")[0];if(o==true){G=F+"?pgurl=isNewgen_trueaddthis_data_key"+I+"addthis_data_key"+J;}else{G=F+"?pgurl=isNewgen_falseaddthis_data_key"+I+"addthis_data_key"+J;}z="https://oauth.twitter.com/2/authorize?";y=["oauth_callback_url="+G,"oauth_mode=flow_web_client","oauth_client_identifier="+I,"redirect_uri="+G,"response_type=token","client_id="+I];f=y.join("&");z=z+f;if(o==true){b=window.open(z,"twitter","width=700, height=500");D=setInterval(function(){b.postMessage(J.toString(),G);},200);}else{window.location.href=z;}};}}}},C=function(I){var K=((window.addthis_config.login.services||{}).twitter||{}).appKey||"zJBQiyqKl76HCqn2bmwNw";E=document.createElement("script");j="//platform.twitter.com/anywhere.js?id=";E.src=j+K+"&v=1";document.getElementsByTagName("head")[0].appendChild(E);var J=setInterval(function(){if(typeof(twttr)!="undefined"){clearInterval(J);q(I);}},200);},q=function(I){twttr.anywhere(function(K){var J;if(K.isConnected()){data=K.currentUser.data();data.service="twitter";_ate.ed.fire("addthis.social.connect",window,data);_ate.track.osc(data);addthis.login.user={service:"twitter",twitter:{},id:data.id,addthis_signature:I};for(u in data){addthis.login.user.twitter[u]=data[u];addthis.login.user[u]=data[u];}addthis.login.user.serviceId=data.id;if(data.profile_image_url){addthis.login.user.thumbnailURL=data.profile_image_url;}else{addthis.login.user.thumbnailURL="";}if(data.name){addthis.login.user.firstName=data.name;addthis.login.user.lastName="";}else{addthis.login.user.firstName="";addthis.login.user.lastName="";}if(data.time_zone){addthis.login.user.timezone=data.time_zone;}else{addthis.login.user.timezone="";}if(data.country){addthis.login.user.country=addthis.login.user.location;}else{addthis.login.user.location="";}addthis.login.user.profileURL="http://twitter.com/#!/"+data.screen_name;addthis.login.user.email="";addthis.login.user.gender="";addthis.login.user.locale="";m(data,addthis.login.user,"twitter");setTimeout(function(){window.addthis_config.login.callback(addthis.login.user);},250);}else{addthis.login.user={service:"twitter",error:{code:"401",message:"invalid token"}};window.addthis_config.login.callback(addthis.login.user);return;}twttr.anywhere.signOut();});},i=function(){if(window.addthis_config.login.services.google){var I=null;if(((window.addthis_config.login.services||{}).google||{}).clientId){I=((window.addthis_config.login.services||{}).google||{}).clientId;}else{if(((window.addthis_config.login.services||{}).google||{}).id){I=((window.addthis_config.login.services||{}).google||{}).id;}}if(I){A=n("google-connect","addthis_login_google");if(A){document.getElementById("google-connect").onclick=function(){if(o==true){G=F+"?isNewGen=true";}else{G=F+"?isNewGen=false";}z="https://accounts.google.com/o/oauth2/auth?";y=["client_id="+I,"redirect_uri="+G,"response_type=token","scope=https://www.googleapis.com/auth/userinfo.email+https://www.googleapis.com/auth/userinfo.profile","state="+window.location];f=y.join("&");z=z+f;if(o==true){window.open(z,"google","width=700, height=500");}else{window.location.href=z;}};if(window.location.hash.indexOf("access_token=")!=-1&&window.location.hash.indexOf("expires_in=")!=-1&&window.location.hash.indexOf("token_type=Bearer")!=-1){t(window.location.hash.substring(1));}}}}},t=function(J){B=J;x="https://www.googleapis.com/oauth2/v1/userinfo?";g=[B,"callback=?"];l=g.join("&");var I=x+l;var K={get_data:function(N,P){var L="_atcb"+(new Date()).getTime(),M=document.createElement("script"),O=document.getElementsByTagName("head")[0]||document.documentElement;window[L]=function(Q){O.removeChild(M);P&&P(Q);};M.src=N.replace("callback=?","callback="+L);O.appendChild(M);}};K.get_data(I,function(L){if(L.error){addthis.login.user={service:"google",error:{code:L.error.code,message:L.error.message}};window.addthis_config.login.callback(addthis.login.user);return;}L.service="google";_ate.ed.fire("addthis.social.connect",window,L);_ate.track.osc(L);addthis.login.signature=B.split("&");addthis.login.signature=addthis.login.signature[3].split("=");addthis.login.user={service:"google",google:{},id:L.id,addthis_signature:addthis.login.signature[1]};for(u in L){addthis.login.user.google[u]=L[u];addthis.login.user[u]=L[u];}addthis.login.user.serviceId=L.id;if(L.picture){addthis.login.user.thumbnailURL=L.picture;}else{addthis.login.user.thumbnailURL="";}if(L.given_name){addthis.login.user.firstName=L.given_name;}else{addthis.login.user.firstName="";}if(L.family_name){addthis.login.user.lastName=L.family_name;}else{addthis.login.user.lastName="";}if(L.gender){addthis.login.user.gender=L.gender;}else{addthis.login.user.gender="";}addthis.login.user.email=L.email;if(L.link){addthis.login.user.profileURL=L.link;}else{addthis.login.user.profileURL="";}if(L.locale){addthis.login.user.locale=L.locale;}else{addthis.login.user.locale="";}addthis.login.user.timezone="";m(L,addthis.login.user,"google");setTimeout(function(){window.addthis_config.login.callback(addthis.login.user);},250);});};function m(K,J,I){addthis.user.socialData={serviceId:J.serviceId,firstName:J.firstName,lastName:J.lastName,email:J.email,gender:J.gender,profileURL:J.profileURL,thumbnailURL:J.thumbnailURL,networks:addthis.user.socialData.networks};addthis.user.socialData.networks[I]={};for(u in K){addthis.user.socialData.networks[I][u]=K[u];}}function c(){_ate.track.apc("ssi-1.0");if(window.postMessage=="undefined"||navigator.appName=="Microsoft Internet Explorer"){o=false;}else{o=true;}addthis.user.socialData={};addthis.user.socialData.networks={};for(var I in window.addthis_config.login.services){switch(I){case"facebook":e();break;case"twitter":p();break;case"google":i();break;}}}function h(I){if(I&&(I.sso||I.ssi)){switch(I.service){case"facebook":w(I.user);break;case"twitter":window.location.hash="oauth_access_token="+I.token;C(I.user);break;case"google":t(I.user);break;}}}function d(I){if(I.twitter){window.addthis_config.login.services.twitter={};if(I.twitter["id"]){window.addthis_config.login.services.twitter["id"]=I.twitter["id"];}}if(I.facebook){window.addthis_config.login.services.facebook={};if(I.facebook["id"]){window.addthis_config.login.services.facebook["id"]=I.facebook["id"];}if(I.facebook["scope"]){window.addthis_config.login.services.facebook["scope"]=I.facebook["scope"];}}if(I.google){window.addthis_config.login.services.google={};if(I.google["id"]){window.addthis_config.login.services.google["id"]=I.google["id"];}}if(I.callback){window.addthis_config.login.callback=I.callback;}c();}addthis.login.connect=d;addthis.login.ost=1;_ate._rec.push(h);if((window.addthis_config.login||{}).services){c();}else{window.addthis_config=window.addthis_config||{};window.addthis_config.login=addthis_config.login||{};window.addthis_config.login.services={};}})();
